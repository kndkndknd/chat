{"version":3,"sources":["webpack:///webpack/bootstrap f06ddaff0fbbda2d4d40","webpack:///./src/module.js","webpack:///./src/client.js"],"names":["exports","keyDownFunc","keyCode","stringsClient","socket","keyMap","charCode","emit","charEmit","char","chunkEmit","data","toBase64","buffer","video","bufferContext","getContext","width","videoWidth","height","videoHeight","drawImage","toDataURL","textPrint","ctx","canvas","text","fillStyle","length","font","String","Math","floor","textAlign","textBaseline","fillText","restore","whitePrint","fillRect","ctrlView","statusList","HTML","clients","tableHTML","key","chatFrom","chatTo","recordFrom","playbackTo","timelapseTo","drumTo","silenceTo","secbeforeTo","status","toString","Object","prototype","call","rangeHTML","id","streamType","sampleRateHTML","streamStatus","glitch","gainHTML","substr","toUpperCase","fadeHTML","cmd","FADE","IN","OUT","PORTAMENT","statusPrint","oscGainValue","freqVal","feedbackGainValue","noiseGainValue","bassFlag","statusText","keycodeMap","keycode","modules","require","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","window","URL","webkitURL","mozURL","msURL","AudioContext","webkitAudioContext","mozAudioContext","msAudioContext","audioContext","masterGain","createGain","gainVal","fadeVal","gain","setValueAtTime","prevGain","connect","destination","feedbackGain","filter","createBiquadFilter","type","frequency","javascriptnode","createScriptProcessor","streamBuffer","lookBackBuffer","bufferSize","bufferRate","osc","createOscillator","oscGain","oscPortament","start","bassOsc","bassGain","clickOsc","clickGain","whitenoise","whitenoiseNode","noiseGain","onaudioprocess","ev","buf0","outputBuffer","getChannelData","buf1","i","random","chatBuffer","chatGain","convolver","createConvolver","revGain","console","log","context","sampleRate","droneBuff","timelapseFlag","ssu","SpeechSynthesisUtterance","lang","voice","modList","chordList","chordChange","modChange","alertBuffer","alertPlay","src","createBufferSource","click","currentTime","setTargetAtTime","setTimeout","loadSample","url","req","XMLHttpRequest","open","responseType","onload","response","decodeAudioData","then","b","send","bassLine","bass","BASS","filterChange","returnValue","value","image","receive","receive_ctx","onAudioProcess","e","videoMode","mode","bufferData","Float32Array","inputBuffer","copyFromChannel","funcToBase64","option","playAudioStream","audio","playsampleRate","playVideo","push","beforeChunk","shift","undefined","droneflag","target","sendChunk","flo32arr","volume","audio_src","audioData","audio_buf","createBuffer","copyToChannel","initialize","mediaDevices","stream","mediastreamsource","createMediaStreamSource","document","getElementById","createObjectURL","play","renderStart","createElement","rhythmProperty","metronome","metronomeCount","startRhythm","interval","setInterval","score","timbre","stopRhythm","clearInterval","$","on","standAlone","isNaN","Number","doCmd","strings","speakVoice","addEventListener","sizing","resize","attr","render","requestAnimationFrame","client","rhythm","videoStop","cmdMode","instruction","streamList","uint8arr","toBuffer","playTarget","chunkGain","speechSynthesis","speak","NOISE","sinewave","property","OSC","feedback","FEEDBACK","printText","eval","stop","prevVidMode","timeLapse","stopLapse","bpm","trig","pastPresent","size","remove","addHTML","before","Image","wdth","hght","lapseInterval","setLapse","ctrlCmd","ctrlProperty","val","test","match","targetArr","split","prop"],"mappings":"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","file":"client.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f06ddaff0fbbda2d4d40","\nexports.keyDownFunc = function keyDownFunc(keyCode, stringsClient, socket){\n  const keyMap = {\n// const keycodeMap = {\n  '48' : '0',\n  '49' : '1',\n  '50' : '2',\n  '51' : '3',\n  '52' : '4',\n  '53' : '5',\n  '54' : '6',\n  '55' : '7',\n  '56' : '8',\n  '57' : '9',\n  '65' : 'A',\n  '66' : 'B',\n  '67' : 'C',\n  '68' : 'D',\n  '69' : 'E',\n  '70' : 'F',\n  '71' : 'G',\n  '72' : 'H',\n  '73' : 'I',\n  '74' : 'J',\n  '75' : 'K',\n  '76' : 'L',\n  '77' : 'M',\n  '78' : 'N',\n  '79' : 'O',\n  '80' : 'P',\n  '81' : 'Q',\n  '82' : 'R',\n  '83' : 'S',\n  '84' : 'T',\n  '85' : 'U',\n  '86' : 'V',\n  '87' : 'W',\n  '88' : 'X',\n  '89' : 'Y',\n  '90' : 'Z',\n  '8'  : 'backspace',\n  '13' : 'enter',\n  '16' : 'shift',\n  '17' : 'ctrl',\n  '36' : 'home',\n  '18' : 'alt',\n  '9' : 'tab',\n  '32' : ' ',\n  '107' : 'add',\n  '20' : 'caps_lock',\n  '27' : 'escape',\n  '37' : 'left_arrow',\n  '38' : 'up_arrow',\n  '39' : 'right_arrow',\n  '40' : 'down_arrow',\n  '112' : 'f1' ,\n  '113' : 'f2' ,\n  '114' : 'f3' ,\n  '115' : 'f4' ,\n  '116' : 'f5' ,\n  '117' : 'f6' ,\n  '118' : 'f7' ,\n  '119' : 'f8' ,\n  '120' : 'f9' ,\n  '121' : 'f10',\n  '122' : 'f11',\n  '123' : 'f12',\n  '188' : 'comma',\n  \"190\" : \".\",\n  \"189\" : \"_\",\n  \"226\" : \"_\",\n  \"220\" : \"_\"\n  };\n  let charCode = keyMap[keyCode];\n  if(charCode === \"left_arrow\" || charCode === \"backspace\" || charCode === \"escape\"){\n    stringsClient = \"\";\n  } else if(keyCode >= 48 && keyCode <= 90 || keyCode === 190 || keyCode === 189 || keyCode === 226 || keyCode === 32){\n    stringsClient = stringsClient + charCode;\n  }\n  socket.emit('charFromClient', keyCode);\n  return stringsClient;\n}\n\n\nexports.charEmit = function charEmit(char, socket){\n  socket.emit('charFromClient', char);\n}\n\nexports.chunkEmit = function chunkEmit(data, socket){\n  socket.emit('chunkFromClient', data);\n}\n\nexports.toBase64 = function toBase64(buffer, video){\n  let bufferContext = buffer.getContext('2d');\n  buffer.width = video.videoWidth;\n  buffer.height = video.videoHeight;\n  bufferContext.drawImage(video, 0, 0);\n  //return buffer.toDataURL(\"image/webp\");\n  return buffer.toDataURL(\"image/jpeg\");\n}\n\nexports.textPrint = function textPrint(ctx, canvas, text){\n  // console.log(\"text print\");\n  ctx.fillStyle = \"black\";\n  if(text.length > 2) {\n    ctx.font = \"bold \" + String(Math.floor((canvas.width * 4 / 3) / text.length)) + \"px 'Arial'\";\n  } else {\n    ctx.font = \"bold \" + String(Math.floor((canvas.height * 5 / 4) / text.length)) + \"px 'Arial'\";\n  }\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'middle';\n  ctx.fillText(text, canvas.width / 2, canvas.height / 2);\n  ctx.restore();\n}\n\nexports.whitePrint = function whitePrint(ctx, canvas) {\n  ctx.fillStyle = \"white\";\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n}\n\nexports.ctrlView = function ctrlView(statusList){\n  let HTML = \"\";\n  let clients = statusList[\"clients\"];\n  let tableHTML = '<table border=\"1\" id=\"clientList\"><tr id=\"tr\"><th>client</th> <th>id</th> <th>room</th><th>CHAT_FROM</th> <th>CHAT_TO</th> <th>RECORD_FROM</th> <th>PLAYBACK_TO</th> <th>TIMELAPSE_TO</th> <th>DRUM_TO</th> <th>SILENCE_TO</th> <th>BEFORE_TO</th> <th>CHAT_RATE</th>';\n  for(let key in clients){\n    let chatFrom = \"\",\n        chatTo = \"\",\n        recordFrom = \"\",\n        playbackTo = \"\",\n        timelapseTo = \"\",\n        drumTo = \"\",\n        silenceTo = \"\",\n        secbeforeTo = \"\";\n    \n    for(let status in clients[key][\"STREAMS\"]){\n      let toString = Object.prototype.toString;\n      if(toString.call(clients[key][\"STREAMS\"][status]) === \"[object Object]\"){\n        if(\"FROM\" in clients[key][\"STREAMS\"][status] && clients[key][\"STREAMS\"][status][\"FROM\"]){\n          switch(status){\n            case \"CHAT\":\n              chatFrom = ' checked=\"checked\"';\n              break;\n            case \"RECORD\":\n              recordFrom = ' checked=\"checked\"';\n              break;\n          }\n        }\n        if(\"TO\" in clients[key][\"STREAMS\"][status] && clients[key][\"STREAMS\"][status][\"TO\"]){\n          switch(status){\n            case \"CHAT\":\n              chatTo = ' checked=\"checked\"';\n              break;\n            case \"PLAYBACK\":\n              playbackTo = ' checked=\"checked\"';\n              break;\n            case \"TIMELAPSE\":\n              timelapseTo = ' checked=\"checked\"';\n              break;\n            case \"DRUM\":\n              drumTo = ' checked=\"checked\"';\n              break;\n            case \"SILENCE\":\n              silenceTo = ' checked=\"checked\"';\n              break;\n            case \"SECBEFORE\":\n              secbeforeTo = ' checked=\"checked\"';\n              break;\n          }\n        }\n      }\n    }\n    tableHTML = tableHTML + '<tr id=\"clientTd\"><td>'+ clients[key][\"type\"] + '</td><td id=\"IdTd\">' + clients[key][\"No\"] + '</td><td>' + clients[key][\"room\"] + '</td><td><input type=\"checkbox\" id=\"CHAT_FROM\" class=\"route\" name=\"' + key\n    + '\"' + chatFrom + '></td><td><input type=\"checkbox\" id=\"CHAT_TO\" class=\"route\" name=\"' + key + '\"' + chatTo + '></td><td><input type=\"checkbox\" id=\"RECORD_FROM\" class=\"route\" name=\"'\n    + key + '\"' + recordFrom + '></td><td><input type=\"checkbox\" id=\"PLAYBACK_TO\" class=\"route\" name=\"' + key + '\"' + playbackTo + '></td><td><input type=\"checkbox\" id=\"TIMELAPSE_TO\" class=\"route\" name=\"'\n    + key + '\"' + timelapseTo + '></td><td><input type=\"checkbox\" id=\"DRUM_TO\" class=\"route\" name=\"' + key + '\"' + drumTo + '></td><td><input type=\"checkbox\" id=\"SILENCE_TO\" class=\"route\" name=\"'\n    + key + '\"' + silenceTo + '></td><td><input type=\"checkbox\" id=\"SECBEFORE_TO\" class=\"route\" name=\"' + key + '\"' + secbeforeTo + '></td><td><label class=\"sampleRateLabel\" id=\"CHATRATELabel\" name=\"' + key + '\"></td>';\n  }\n  tableHTML = tableHTML + '</tr></table>';\n\n// latencyTable\n  let rangeHTML = '<table border=\"1\" id=\"latencyList\">';\n  for(let id in clients){\n    rangeHTML = rangeHTML = rangeHTML + '<tr id=\"latency_' + id + '\"><td rowspan=\"2\">' + clients[id][\"No\"] + '</td><td id=\"LATENCYLabel\">latency</td>';\n    for(let streamType in clients[id][\"STREAMS\"]){\n      if(streamType != \"SECBEFORE\" && streamType != \"RECORD\") rangeHTML = rangeHTML + '<td>' + streamType + '<input type=\"range\" class=\"range\" id=\"LATENCY_' + streamType + '\" name=\"' + id + '\" min=\"0\" max=\"10\" step=\"0.5\" value=\"' + clients[id][\"STREAMS\"][streamType][\"LATENCY\"] + '\" /></td>';\n    }\n    rangeHTML = rangeHTML + '</tr><tr id=\"rate_' + id + '\"><td id=\"RATELabel\"> sampleRate </td>';\n    for(let streamType in clients[id][\"STREAMS\"]){\n      if(streamType != \"RECORD\" && streamType != \"SECBEFORE\") rangeHTML = rangeHTML + '<td>' + streamType + '<input type=\"range\" class=\"range\" id=\"RATE_' + streamType + '\" name=\"' + id + '\" min=\"11025\" max=\"88200\" step=\"11025\" value=\"' + clients[id][\"STREAMS\"][streamType][\"RATE\"] + '\" /></td>';\n    }\n    rangeHTML = rangeHTML + '</tr>';\n  }\n  rangeHTML = rangeHTML + '</table>';\n\n\n// rangeTable\n  //let rangeTable = '<table border=\"1\" id=\"clientRangeList\"><tr id=\"tr\"><th>client</th> <th>id</th> <th>CHAT_RATE</th> <th>masterGain</th> <th>chatGain</th> <th>playbackGain</th> <th>timelapseGain</th> <th>drumGain</th> <th>oscGain</th> <th>noiseGain</th> <th>bassGain</th>';\n\n// sampleRate list\n  let sampleRateHTML = '<div id=\"sampleRate\"> Sample Rate <ul id=\"sampleRateList\">';\n  for(let key in statusList[\"sampleRate\"]){\n    sampleRateHTML = sampleRateHTML + '<li>' + key + ': <label class=\"sampleRate\" id=\"sampleRate' + key + 'Label\">' + String(statusList[\"sampleRate\"][key]) + '</label><input type=\"range\" class=\"range\" name=\"sampleRate\" id=\"' + key + '\" min=\"11025\" max=\"88200\" step=\"11025\" value=\"' + statusList[\"sampleRate\"][key] + '\" />'\n    if(key in statusList.streamStatus.glitch){\n      sampleRateHTML = sampleRateHTML + ' glitch<input type=\"checkbox\" id=\"' + key + '\" class=\"glitch\" name=\"' + '_glitch\"'\n      if(statusList.streamStatus.glitch[key]) sampleRateHTML = sampleRateHTML + ' checked=\"checked\"'\n      sampleRateHTML = sampleRateHTML + '>'\n    }\n    sampleRateHTML = sampleRateHTML + '</li>'\n  }\n  sampleRateHTML = sampleRateHTML + '</ul></div>';\n \n// gain list\n  let gainHTML = '<div id=\"gainCtrl\"> gain; <ul id=\"gainList\">';\n  for(let key in statusList[\"gain\"]) {\n    gainHTML = gainHTML + '<li>' + key.substr(0,key.length-4).toUpperCase() + ': <input type=\"range\" name=\"gain\" class=\"range\" id=\"' + key + '\" min=\"0\" max=\"1\" value=\"' + String(statusList[\"gain\"][key]) + '\" step=\"0.05\" /> <label id=\"gain' + key + 'Label\" class=\"gainLabel\">' + String(statusList[\"gain\"][key]) + '</label></li>';\n  }\n  gainHTML = gainHTML + '</ul> </div>';\n//fade portament list\n  let fadeHTML = '<div id=\"fadeCtrl\"><ul id=\"fadeList\">'\n  fadeHTML = fadeHTML + '<li>FADE IN: <input type=\"range\" name=\"FADE\" class=\"range\" id=\"IN\" min=\"0\" max=\"5\" value=\"' + String(statusList.cmd.FADE.IN) + '\" step=\"0.05\" /> <label id=\"FADEINLabel\" class=\"FADELabel\">' + String(statusList.cmd.FADE.IN) + '</label></li>'\n  fadeHTML = fadeHTML + '<li>FADE OUT: <input type=\"range\" name=\"FADE\" class=\"range\" id=\"OUT\" min=\"0\" max=\"5\" value=\"' + String(statusList.cmd.FADE.OUT) + '\" step=\"0.05\" /> <label id=\"FADEOUTLabel\" class=\"FADELabel\">' + String(statusList.cmd.FADE.OUT) + '</label></li>'\n  fadeHTML = fadeHTML + '<li>PORTAMENT: <input type=\"range\" name=\"PORTAMENT\" class=\"range\" id=\"PORTAMENT\" min=\"0\" max=\"30\" value=\"' + String(statusList.cmd.PORTAMENT) + '\" step=\"0.05\" /> <label id=\"PORTAMENTPORTAMENTLabel\" class=\"PORTAMENTLabel\">' + String(statusList.cmd.PORTAMENT) + '</label></li>'\n\n  HTML = tableHTML + rangeHTML + sampleRateHTML + gainHTML + fadeHTML;\n  return HTML;\n}\n\nexports.statusPrint = function statusPrint(oscGainValue, freqVal, feedbackGainValue, noiseGainValue, bassFlag){\n  let statusText = \"\";\n  if(oscGainValue > 0){\n    statusText = String(freqVal) + \"Hz\";\n  }\n  if(feedbackGainValue > 0){\n    if(statusText === \"\"){\n      statusText = \"FEEDBACK\";\n    } else {\n      statusText = statusText + \", FEEDBACK\"\n    }\n  }\n  if(noiseGainValue > 0){\n    if(statusText === \"\"){\n      statusText = \"WHITENOISE\";\n    } else {\n      statusText = statusText + \", WHITENOISE\"\n    }\n  }\n  if(bassFlag){\n    if(statusText === \"\"){\n      statusText = \"BASS\";\n    } else {\n      statusText = statusText + \", BASS\"\n    }\n  }\n  return statusText;\n}\n\nexports.keycodeMap = function keycodeMap(keycode){\n  const keyMap = {\n// const keycodeMap = {\n  '48' : '0',\n  '49' : '1',\n  '50' : '2',\n  '51' : '3',\n  '52' : '4',\n  '53' : '5',\n  '54' : '6',\n  '55' : '7',\n  '56' : '8',\n  '57' : '9',\n  '65' : 'A',\n  '66' : 'B',\n  '67' : 'C',\n  '68' : 'D',\n  '69' : 'E',\n  '70' : 'F',\n  '71' : 'G',\n  '72' : 'H',\n  '73' : 'I',\n  '74' : 'J',\n  '75' : 'K',\n  '76' : 'L',\n  '77' : 'M',\n  '78' : 'N',\n  '79' : 'O',\n  '80' : 'P',\n  '81' : 'Q',\n  '82' : 'R',\n  '83' : 'S',\n  '84' : 'T',\n  '85' : 'U',\n  '86' : 'V',\n  '87' : 'W',\n  '88' : 'X',\n  '89' : 'Y',\n  '90' : 'Z',\n  '8'  : 'backspace',\n  '13' : 'enter',\n  '16' : 'shift',\n  '17' : 'ctrl',\n  '36' : 'home',\n  '18' : 'alt',\n  '9' : 'tab',\n  '32' : ' ',\n  '107' : 'add',\n  '20' : 'caps_lock',\n  '27' : 'escape',\n  '37' : 'left_arrow',\n  '38' : 'up_arrow',\n  '39' : 'right_arrow',\n  '40' : 'down_arrow',\n  '112' : 'f1' ,\n  '113' : 'f2' ,\n  '114' : 'f3' ,\n  '115' : 'f4' ,\n  '116' : 'f5' ,\n  '117' : 'f6' ,\n  '118' : 'f7' ,\n  '119' : 'f8' ,\n  '120' : 'f9' ,\n  '121' : 'f10',\n  '122' : 'f11',\n  '123' : 'f12',\n  '188' : 'comma',\n  \"190\" : \".\",\n  \"189\" : \"_\",\n  \"226\" : \"_\",\n  \"220\" : \"_\"\n  };\n  return keyMap[keycode];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/module.js","const modules = require('./module.js');\n\nnavigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\nwindow.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\nwindow.AudioContext = window.AudioContext || window.webkitAudioContext || window.mozAudioContext || window.msAudioContext;\n\nlet audioContext = new AudioContext();\nlet masterGain = audioContext.createGain();\n\nlet gainVal = {\n  \"master\": 0.7,\n  \"FEEDBACK\": 1,\n  \"OSC\": 1,\n  \"BASS\": 0.7,\n  \"CLICK\": 0.7,\n  \"NOISE\": 0.3,\n  \"CHAT\": 1,\n  \"PLAYBACK\": 0.7,\n  \"TIMELAPSE\": 0.7,\n  \"DRUM\": 0.7,\n  \"SECBEFORE\": 0.7,\n  \"SILENCE\": 0\n}\nlet fadeVal = {\n  \"IN\": 0,\n  \"OUT\": 0\n}\n\n\nmasterGain.gain.setValueAtTime(gainVal[\"master\"],0)\n//masterGain.gain.setTargetAtTime(gainVal[\"master\"],0,0)\nlet prevGain = 0.7;\nmasterGain.connect(audioContext.destination);\n\n// feedback\nlet feedbackGain = audioContext.createGain();\nfeedbackGain.gain.setValueAtTime(0,0);\nlet filter = audioContext.createBiquadFilter();\nfilter.type = \"highpass\";\nfilter.frequency.setValueAtTime(200,0);\n//record/play\nlet javascriptnode = audioContext.createScriptProcessor(8192, 1, 1);\nlet streamBuffer = [];\nlet lookBackBuffer = [];\nlet bufferSize = 8192;\nlet bufferRate = 44100;\n// sinewave\nlet osc = audioContext.createOscillator();\nlet oscGain = audioContext.createGain();\nlet oscPortament = 0;\nosc.connect(oscGain);\noscGain.connect(audioContext.destination);\n//oscGain.connect(masterGain);\n//osc.frequency.setTargetAtTime(440,audioContext.currentTime,audioContext.currentTime);\n//oscGain.gain.setTargetAtTime(0,audioContext.currentTime,audioContext.currentTime);\nosc.frequency.setValueAtTime(440, 0);\n//osc.frequency.setValueAtTime(440,audioContext.currentTime);\noscGain.gain.setValueAtTime(0,0);\n//oscGain.gain.setValueAtTime(0,audioContext.currentTime);\nosc.start(0);\nlet bassOsc = audioContext.createOscillator();\nlet bassGain = audioContext.createGain();\nbassOsc.connect(bassGain);\nbassGain.connect(masterGain);\nbassOsc.frequency.setValueAtTime(20,0)\nbassGain.gain.setValueAtTime(0,0);\nbassOsc.start(0);\n\nlet clickOsc = audioContext.createOscillator();\nlet clickGain = audioContext.createGain();\nclickOsc.connect(clickGain);\nclickGain.connect(masterGain);\nclickOsc.frequency.setValueAtTime(440,0)\nclickGain.gain.setValueAtTime(0,0);\nclickOsc.start(0);\n\n//whitenoise\nlet whitenoise = audioContext.createOscillator();\nlet whitenoiseNode = audioContext.createScriptProcessor(1024);\nlet noiseGain = audioContext.createGain();\nnoiseGain.gain.setValueAtTime(0,0);\nwhitenoiseNode.onaudioprocess = (ev) => {\n  let buf0 = ev.outputBuffer.getChannelData(0);\n  let buf1 = ev.outputBuffer.getChannelData(1);\n  for(let i=0;i<1024;++i) {\n    buf0[i] = buf1[i] = (Math.random()-0.5);\n  }\n}\nwhitenoise.connect(whitenoiseNode);\nwhitenoiseNode.connect(noiseGain);\nnoiseGain.connect(masterGain);\n//whitenoiseNode.connect(audioContext.destination);\nwhitenoise.start(0);\n\n//munou no unmei\n/*\nlet munouOsc = audioContext.createOscillator();\nlet munouGain = audioContext.createGain();\nmunouOsc.connect(munouGain);\n//oscGain.connect(audioContext.destination);\nmunouGain.connect(masterGain);\nmunouOsc.frequency.value = 110;\nmunouGain.gain.value = 0;\nmunouOsc.start(0);\n*/\n// chat\nlet chatBuffer = {};\nlet chatGain = audioContext.createGain();\nchatGain.gain.setValueAtTime(1,0);\nchatGain.connect(masterGain);\n\nlet convolver = audioContext.createConvolver();\n//convolver.context.sampleRate = 44100;\nlet revGain = audioContext.createGain();\nrevGain.gain.setValueAtTime(3,0);\nconsole.log(convolver.context.sampleRate);\nconvolver.connect(revGain);\nrevGain.connect(masterGain);\nconvolver.connect(masterGain);\nlet droneBuff = {};\n/*let streamGain = {\n\"CHAT\": 1,\n\"PLAYBACK\": 0.7,\n\"TIMELAPSE\": 0.7,\n\"DRUM\": 0.7,\n\"SECBEFORE\": 0.7,\n\"SILENCE\": 0\n};*/\nlet timelapseFlag = false;\n\n// voice\nconst ssu = new SpeechSynthesisUtterance();\nssu.lang = 'en-EN';\nlet voice =false;\n\nconst modList= [0.5, 0.5, 1, 18];\nconst chordList = [1, 4/3, 9/4, 15/8, 17/8, 7/3, 11/3];\nlet chordChange = 0;\nlet modChange = 0;\nlet freqVal;\n\n// alert sound\nlet alertBuffer = null;\n\nconst alertPlay = () => {\n  let src = audioContext.createBufferSource();\n  src.buffer = alertBuffer;\n  src.connect(audioContext.destination);\n  src.start();\n  // console.log(\"alert\");\n}\nconst click = (frequency) => {\n  let currentTime = audioContext.currentTime\n  if(frequency){\n    clickOsc.frequency.setValueAtTime(frequency,0)\n  } else {\n    clickOsc.frequency.setValueAtTime(440,0)\n  }\n  //clickOsc.frequency.value = frequency || 440\n  modules.textPrint(ctx, canvas, \"CLICK\")\n//  clickGain.gain.value = 0.7;\n  clickGain.gain.setValueAtTime(gainVal[\"CLICK\"], currentTime);\n  clickGain.gain.setTargetAtTime(0,currentTime,0.03);\n  setTimeout(()=>{\n    modules.whitePrint(ctx, canvas);\n    // modules.textPrint(ctx, canvas, \"\");\n  },300);\n}\n\nconst loadSample = (ctx, url) => {\n  let req = new XMLHttpRequest();\n  req.open(\"GET\", url, true);\n  req.responseType = \"arraybuffer\";\n  req.onload = () => {\n    if(req.response) {\n      ctx.decodeAudioData(req.response).then(function(b){alertBuffer=b;},function(){});\n    }\n  }\n  req.send();\n}\nloadSample(audioContext, \"/files/alert.wav\");\n\nconst bassLine = [55,68.75,68.75,82.5,82.5,103.125,110];\nlet bassFlag = false;\n\nconst bass = ()  => {\n  let currentTime = audioContext.currentTime\n  if(bassFlag){\n    //bassGain.gain.value = 0;\n    bassGain.gain.setTargetAtTime(0,currentTime,0.02);\n    bassFlag = false;\n    modules.whitePrint(ctx, canvas);\n  } else {\n    modules.whitePrint(ctx, canvas);\n    // console.log(\"vass\");\n    modules.textPrint(ctx, canvas, \"BASS\");\n    bassOsc.frequency.setTargetAtTime(bassLine[Math.floor(bassLine.length * Math.random())],currentTime,0.01)\n    bassGain.gain.setTargetAtTime(gainVal.BASS,currentTime,0.02);\n    bassFlag = true;\n  }\n}\n\nconst filterChange = () => {\n  let returnValue = 0;\n  let currentTime = audioContext.currentTime\n  switch(filter.frequency.value){\n    case 200:\n      returnValue = 2000;\n      break;\n    case 2000:\n      returnValue = 8000;\n      break;\n    case 8000:\n      returnValue = 14000;\n      break;\n    case 14000:\n      returnValue = 0;\n      break;\n    default:\n      returnValue = 200;\n      break;\n  }\n  filter.frequency.setTargetAtTime(returnValue,currentTime,0)\n  return returnValue;\n}\n\n//video record/play \nlet image;\nlet receive;\nlet receive_ctx;\nconst onAudioProcess = (e) => {\n  if(videoMode.mode != \"none\"){\n    //consol.log(videoMode);\n    let bufferData = new Float32Array(bufferSize);\n    e.inputBuffer.copyFromChannel(bufferData, 0);\n    if(videoMode.mode === \"record\"){\n      modules.chunkEmit({\"audio\":bufferData, \"video\":funcToBase64(buffer, video), \"target\": \"PLAYBACK\"},socket);\n    } else if(videoMode.option === \"loop\" && videoMode.mode === \"chat\"){\n        if(\"audio\" in chatBuffer) {\n          playAudioStream(chatBuffer.audio,playsampleRate,1,false);\n        }\n        if(\"video\" in chatBuffer){\n          modules.whitePrint(ctx, canvas);\n          playVideo(chatBuffer[\"video\"]);\n          modules.textPrint(ctx, canvas, \"LOOP\");\n        } else {\n          modules.textPrint(ctx, canvas, stringsClient);\n        }\n    } else if(videoMode.option != \"drone\"){\n      switch(videoMode.mode){\n        /*\n        case \"record\":\n        modules.chunkEmit({\"audio\":bufferData, \"video\":funcToBase64(buffer, video), \"target\": \"PLAYBACK\"},socket);\n        break;*/\n        case \"chat\":\n        chatBuffer[\"audio\"] = bufferData;\n        chatBuffer[\"video\"] = funcToBase64(buffer, video);\n        chatBuffer[\"target\"] = \"CHAT\";\n        break;\n        case \"pastBuff\":\n          streamBuffer.push({\n            \"audio\": bufferData,\n            \"video\": funcToBase64(buffer, video)\n          });\n          break;\n        case \"pastPlay\":\n          let beforeChunk = {};\n          if(streamBuffer.length>0){\n            beforeChunk = streamBuffer.shift();\n          } else {\n            beforeChunk = {\"audio\": bufferData, \"video\": funcToBase64(buffer, video)};\n          }\n            playAudioStream(beforeChunk[\"audio\"],bufferRate,gainVal[\"SECBEFORE\"],false);\n            playVideo(beforeChunk[\"video\"]);\n             console.log(streamBuffer.length);\n            streamBuffer.push({\n              \"audio\": bufferData,\n              \"video\": funcToBase64(buffer, video)\n            })\n          break;\n      }\n    } else { //DRONE\n      if(droneBuff != undefined && droneBuff != {} && droneflag){\n       // if(\"audio\" in playBuff) {\n        //if(\"audio\" in playBuff && !bufferPlaying) {\n        if(\"audio\" in droneBuff) {\n        //if(\"audio\" in droneBuff && !bufferPlaying) {\n          //playAudioStream(playBuff[\"audio\"],44100,1,false);\n          playAudioStream(droneBuff[\"audio\"],droneBuff[\"sampleRate\"],1,false);\n        }\n        //if(\"video\" in playBuff){\n        if(\"video\" in droneBuff){\n          playVideo(droneBuff[\"video\"]);\n        } else {\n          modules.textPrint(ctx, canvas, stringsClient);\n        }\n        //console.log(\"play\");\n        //if(droneBuff.target === \"CHAT\"){\n          chatBuffer[\"audio\"] = bufferData;\n          chatBuffer[\"video\"] = modules.toBase64(buffer, video);\n          chatBuffer[\"target\"] = droneBuff.target;\n        //} else {\n         // socket.emit('wavReqFromClient', data[\"target\"]);\n       // }\n      }\n      /*\n      console.log(droneBuff)\n      if(droneBuff != undefined && droneBuff != {} && droneflag){\n        if(\"audio\" in droneBuff) playAudioStream(droneBuff[\"audio\"],droneBuff[\"sampleRate\"],droneBuff[\"gain\"],droneBuff.glitch);\n        if(\"video\" in droneBuff){\n          playVideo(droneBuff[\"video\"]);\n        } else {\n          modules.textPrint(ctx, canvas, stringsClient);\n        }\n        console.log(\"play\");\n        if(droneBuff.target === \"CHAT\"){\n          chatBuffer[\"audio\"] = bufferData;\n          chatBuffer[\"video\"] = modules.toBase64(buffer, video);\n          chatBuffer[\"target\"] = droneBuff.target;\n        } else {\n          socket.emit('wavReqFromClient', data[\"target\"]);\n        }\n      }\n      */\n    }\n  }\n  if(timelapseFlag){\n    let bufferData = new Float32Array(bufferSize);\n    e.inputBuffer.copyFromChannel(bufferData, 0);\n    let sendChunk = {\"audio\":bufferData, \"video\": funcToBase64(buffer, video), \"target\": \"TIMELAPSE\"};\n    modules.chunkEmit(sendChunk,socket);\n    timelapseFlag = false;\n  }\n}\nconst playAudioStream = (flo32arr, sampleRate, volume, glitch) => {\n  //if(!glitch){\n    let audio_src = audioContext.createBufferSource();\n    let audioData = new Float32Array(bufferSize);\n    for(let i = 0; i < audioData.length; i++){\n      audioData[i] = flo32arr[i] * volume;\n    }\n    if(!glitch){\n      console.log(sampleRate)\n      let audio_buf = audioContext.createBuffer(1, bufferSize, sampleRate)\n      audio_buf.copyToChannel(audioData, 0);\n      audio_src.buffer = audio_buf;\n      audio_src.connect(masterGain);\n    } else {\n      console.log(\"glitch\")\n      let audio_buf = audioContext.createBuffer(1, bufferSize, convolver.context.sampleRate)\n      audio_buf.copyToChannel(audioData, 0);\n      // console.log(audio_buf);\n\n      audio_src.buffer = audio_buf;\n      convolver.buffer = audio_buf;\n      audio_src.connect(convolver);\n    }\n    //let timeOut = audio_src.buffer.duration * 1000;\n    audio_src.start(0);\n    /*\n    droneflag = false\n    setTimeout(()=>{\n      droneflag = true\n    },timeOut);*/\n  //}\n}\ndroneflag = true;\n//video record/play \n\nconst initialize = () =>{\n  if(navigator.mediaDevices.getUserMedia){\n    navigator.mediaDevices.getUserMedia({\n      video: true, audio: /*true*/{\n        \"mandatory\": {\n          \"googEchoCancellation\": false,\n          \"googAutoGainControl\": false,\n          \"googNoiseSuppression\": false,\n          \"googHighpassFilter\": false\n        },\"optional\": []\n      } \n    }).then((stream) =>{\n    //}, (stream) =>{\n      let mediastreamsource = void 0;\n      mediastreamsource = audioContext.createMediaStreamSource(stream);\n      mediastreamsource.connect(filter);\n      filter.connect(javascriptnode);\n      filter.connect(feedbackGain);\n      //      selfGain.connect(analyser);\n  //    feedbackGain.connect(audioContext.destination);\n      feedbackGain.connect(masterGain);\n      //video\n      video = document.getElementById('video');\n      video.src = window.URL.createObjectURL(stream);\n      video.play();\n      video.volume = 0;\n      renderStart();\n    },  (e) =>{\n      return console.log(e);\n    });\n  } else {\n    navigator.getUserMedia({\n      video: true, audio: {\n        \"mandatory\": {\n          \"googEchoCancellation\": false,\n          \"googAutoGainControl\": false,\n          \"googNoiseSuppression\": false,\n          \"googHighpassFilter\": false\n        },\"optional\": []\n      } \n    }, (stream) =>{\n    //}, (stream) =>{\n      let mediastreamsource = void 0;\n      mediastreamsource = audioContext.createMediaStreamSource(stream);\n      mediastreamsource.connect(filter);\n      filter.connect(javascriptnode);\n      filter.connect(feedbackGain);\n      //      selfGain.connect(analyser);\n  //    feedbackGain.connect(audioContext.destination);\n      feedbackGain.connect(masterGain);\n      //video\n      video = document.getElementById('video');\n      video.src = window.URL.createObjectURL(stream);\n      video.play();\n      video.volume = 0;\n      renderStart();\n    },  (e) =>{\n      return console.log(e);\n    });\n  }\n  //rec\n  javascriptnode.onaudioprocess = onAudioProcess;\n  // javascriptnode.connect(audioContext.destination);\n  javascriptnode.connect(masterGain);\n  //video\n  image = document.createElement(\"img\");\n  receive = document.getElementById(\"cnvs\");\n  receive_ctx = receive.getContext(\"2d\");\n};\n\n//metronome\nlet rhythmProperty = {\n  \"bpm\": 60,\n  \"interval\": 1000,\n  \"score\": [1,1,1,1],\n  \"timbre\": 440\n};\nlet metronome;\nlet metronomeCount = 0;\nconst startRhythm = (interval) =>{\n  metronome = setInterval(()=>{\n    if(rhythmProperty.score[metronomeCount] === 1){\n      switch(rhythmProperty.timbre){\n        default:\n          click(rhythmProperty.timbre)\n          /*\n          clickOsc.frequency.value = rhythmProperty.timbre\n          clickGain.gain.setValueAtTime(gainVal[\"CLICK\"], t0);\n          clickGain.gain.setTargetAtTime(0,t0,0.03);\n          */\n      }\n    }\n    if(metronomeCount+1 < rhythmProperty.score.length){\n      metronomeCount++\n    } else {\n      metronomeCount = 0\n    }\n  },interval); \n}\n\nconst stopRhythm = () => {\n  clearInterval(metronome);\n}\n\n//keyboard\nlet stringsClient = \"\";\n\n\n$(() =>{\n  $(document).on(\"keydown\", (e)=> {\n    console.log(e.keyCode);\n    if(e.keyCode === 188){\n      if(standAlone) {\n        standAlone = false;\n        modules.whitePrint(ctx, canvas);\n        modules.textPrint(ctx, canvas, \"network connect\");\n        setTimeout(()=>{\n          modules.whitePrint(ctx, canvas);\n//          modules.textPrint(ctx, canvas, \"\");\n        },300);\n      } else {\n        standAlone = true;\n        modules.whitePrint(ctx, canvas);\n        modules.textPrint(ctx, canvas, \"stand alone\");\n        setTimeout(()=>{\n          modules.whitePrint(ctx, canvas);\n//          modules.textPrint(ctx, canvas, \"\");\n        },300);\n      }\n      socket.emit('standAlonefromClient', standAlone);\n    } else if(standAlone){\n      // let charCode = keycodeMap[String(e.keyCode)];\n      let charCode = modules.keycodeMap(String(e.keyCode));\n      if(charCode === \"enter\"){\n        // console.log(isNaN(Number(stringsClient)));\n        if (isNaN(Number(stringsClient)) === false && stringsClient != \"\") {\n          doCmd({\n            \"cmd\":\"SINEWAVE\",\n            \"property\": Number(stringsClient)\n          });\n//          console.log(\"sinewave stand alone\")\n        } else {\n          doCmd({\"cmd\":stringsClient});\n        }\n        stringsClient = \"\";\n      } else if(charCode === \"escape\") {\n        doCmd({\"cmd\":\"STOP\"});\n        stringsClient = \"\";\n      } else if(charCode === \"left_arrow\" || charCode === \"backspace\"){\n        stringsClient = \"\";\n        modules.whitePrint(ctx, canvas);\n      } else if(e.keyCode >= 48 && e.keyCode <= 90 || e.keyCode === 190 || e.keyCode === 189 || e.keyCode === 32 || e.keyCode === 16){\n        switch(charCode){\n          case \"C\":\n            click();\n            break;\n          case \"B\":\n            bass();\n            break;\n          case \"F\":\n            doCmd({\"cmd\":\"FEEDBACK\"});\n            break;\n          case \"W\":\n          case \"N\":\n            doCmd({\"cmd\":\"WHITENOISE\"})\n            break;\n          case \"S\":\n            doCmd({\"cmd\":\"SAMPLERATE\"});\n            break;\n          default:\n            stringsClient = stringsClient + charCode;\n            modules.whitePrint(ctx, canvas);\n            modules.textPrint(ctx, canvas, stringsClient);\n            break;\n        }\n      }\n    } else {\n      // let charCode = keycodeMap[String(e.keyCode)];\n      let charCode = modules.keycodeMap(String(e.keyCode));\n      stringsClient = modules.keyDownFunc(e.keyCode, stringsClient, socket);\n      modules.whitePrint(ctx, canvas);\n      modules.textPrint(ctx, canvas, stringsClient);\n      if(e.keyCode === 17 || e.keyCode === 0){\n        bass();\n        strings = \"\";\n        stringsClient = \"\";\n      }\n      // if(e.keyCode != 16){\n        if(e.keyCode === 13 && stringsClient === \"VOICE\"){\n          if(voice){\n            voice = false;\n            modules.whitePrint(ctx, canvas);\n            modules.textPrint(ctx, canvas, \"VOICE OFF\");\n            stringsClient = \"\";\n            setTimeout(()=>{\n              modules.whitePrint(ctx, canvas);\n              modules.charEmit(37, socket);\n            },500);\n          } else {\n            voice = true;\n            modules.whitePrint(ctx, canvas);\n            modules.textPrint(ctx, canvas, \"VOICE MODE\");\n            stringsClient = \"\";\n            setTimeout(()=>{\n              modules.charEmit(37, socket);\n            },500);\n          }\n//          stringsClient = \"\";\n        }\n      if(charCode === \"enter\" && voice && stringsClient === \"STOP\") speakVoice(stringsClient)\n      // }\n      // if(charCode = \"enter\" && voice && stringsClient != \"VOICE\") {\n        /*\n      if(charCode === \"enter\" && voice && stringsClient != \"VOICE\"){\n        ssu.text = stringsClient;\n        speechSynthesis.speak(ssu);\n        stringsClient = \"\";\n      }*/\n    }\n  });\n});\n\n\nwindow.addEventListener(\"load\", initialize, false);\n\n\n\n// \n// canvas\n\nlet canvas = document.getElementById('cnvs');\nlet ctx = canvas.getContext('2d');\nlet buffer;\nlet bufferContext;\n\n$(() => {\n  sizing();\n//  draw();\n  $(window).resize(() =>{\n    sizing();\n  });\n});\nconst sizing=() =>{\n  $(\"#cnvs\").attr({ height: $(window).height() });\n  $(\"#cnvs\").attr({ width: $(window).width() });\n}\n\n\n\nconst renderStart=()=> {\n  video = document.getElementById('video');\n  buffer = document.createElement('canvas');\n  bufferContext = buffer.getContext('2d');\n\n  let render = () => {\n    requestAnimationFrame(render);\n    let width = video.videoWidth;\n    let height = video.videoHeight;\n    if(width == 0 || height ==0) {return;}\n    buffer.width = width;\n    buffer.height = height;\n    bufferContext.drawImage(video, 0, 0);\n  }\n  render();\n}\n\n/* socket */\nsocket.emit('connectFromClient', client);\nsocket.on('connectFromServer', (data) => {\n  rhythmProperty = data.rhythm\n})\n\nsocket.on('stringsFromServer', (data) =>{\n  modules.whitePrint(ctx, canvas);\n  modules.textPrint(ctx, canvas, data);\n  //speakVoice(data)\n});\n\nsocket.on('statusViewFromServer', ()=>{\n  let statusText = modules.statusPrint(oscGain.gain.value, freqVal, feedbackGain.gain.value, noiseGain.gain.value, bassFlag);\n  strings = \"\";\n  stringsClient = \"\";\n  modules.whitePrint(ctx, canvas);\n  modules.textPrint(ctx, canvas, statusText);\n  setTimeout(()=>{\n    modules.whitePrint(ctx, canvas);\n  },500)\n});\n\nsocket.on('cmdFromServer', (data) => {\n  if(standAlone === false){\n    console.log(data);\n    doCmd(data);\n  }\n});\nsocket.on('textFromServer', (data) => {\n  speakVoice(data)\n  modules.whitePrint(ctx, canvas);\n  modules.textPrint(ctx, canvas, data);\n  setTimeout(()=>{\n    modules.whitePrint(ctx, canvas);\n  },800)\n  stringsClient = \"\";\n});\n\nsocket.on('instructionFromServer', (data) => {\n  videoStop();\n  modules.whitePrint(ctx, canvas);\n  modules.textPrint(ctx, canvas, data[\"text\"]);\n  //alertPlay();\n  speakVoice(data)\n  cmdMode.instruction = true\n  setTimeout(()=>{\n    modules.whitePrint(ctx, canvas);\n    cmdMode.instruction = false\n  }, data[\"duration\"]);\n});\n\nsocket.on('streamListFromServer', (data) =>{\n  streamList = data;\n  console.log(streamList);\n});\n\nsocket.on('streamReqFromServer', (data) => {\n  switch(data){\n    case \"CHAT\":\n    case \"droneChat\":\n      //if(chatBuffer!= {}){\n        socket.emit('chunkFromClient', chatBuffer);\n      /*} else {\n        socket.emit('chunkFromClient', {\n          \"audio\" : \"\",\n          \"video\" : \"\",\n          \"target\": \"CHAT\"\n        });\n      }*/\n    break;\n  }\n});\n\nsocket.on('oscFromServer',(data) => {\n  let uint8arr = osc.toBuffer(data);\n});\n/*\nconst playGlitchedURL = (url) => {\n  if(~url.indexOf(\"data:image/jpeg;base64,\")){\n    let audioURL = \"data:audio/wav;base64,\" + url.split(\"data:image/jpeg;base64,\")[1].slice(0,-2) + \"gAA==\";\n    console.log(audioURL);\n    let buff = Base64Binary.decodeArrayBuffer(audioURL);\n    audioContext.decodeAudioData(buff, (audioData)=>{\n      let audioSrc = audioContext.createBufferSource()\n      audioSrc.buffer = audioData\n      audioSrc.connect(masterGain);\n      audioSrc.start(0);\n    });\n  //  decodeaudiodata\n  }\n}\n*/\nlet playsampleRate = 44100\nlet playTarget = \"\"\nsocket.on('chunkFromServer', (data) => {\n  //if(videoMode.mode === \"chat\"){\n  if(videoMode.mode != \"record\" && videoMode.option != \"loop\"){\n    if(videoMode.mode != \"chat\" && data.target === \"CHAT\") videoMode.mode = \"chat\";\n    //if(data.target === \"DRONECHAT\" && videoMode.mode === \"droneChat\"){\n    if(videoMode.option === \"drone\"){\n      droneBuff = data;\n      //socket.emit('wavReqFromClient', data[\"target\"]);\n      //console.log(\"wavReq\");\n      //socket.emit('chunkFromClient', chatBuffer);\n    } else {\n      playTarget = data.target\n      if(data[\"audio\"] != undefined && data[\"audio\"] != \"\") {\n        let chunkGain = 0.7;\n        if(data[\"target\"] in gainVal){\n          chunkGain = gainVal[data[\"target\"]];\n        }\n        //let playsampleRate = 44100\n        //if(data.sampleRate != undefined) {\n          playsampleRate = Number(data.sampleRate)\n          //let playsampleRate = Number(data.sampleRate)\n        //}\n        //console.log(playsampleRate);\n        //playAudioStream(data[\"audio\"],Number(data[\"sampleRate\"]),chunkGain,data[\"glitch\"]);\n        playAudioStream(data[\"audio\"],playsampleRate,chunkGain,data[\"glitch\"]);\n        //if(data.glitch) playGlitchedURL(data.video);\n      }\n      if(data[\"video\"] != undefined && data[\"video\"] != \"\") {\n         playVideo(data[\"video\"]);\n      } else if(data.target != \"CHAT\"){\n        modules.whitePrint(ctx, canvas);\n        modules.textPrint(ctx, canvas, data[\"target\"]);\n      } else {\n        modules.whitePrint(ctx, canvas);\n      }\n    }\n    if(data[\"target\"] === \"CHAT\"){\n      socket.emit('AckFromClient', \"CHAT\");\n    } else {\n      socket.emit('wavReqFromClient', data[\"target\"]);\n    }\n  }\n});\nconst speakVoice = (data) =>{\n  if(voice && data != \"VOICE\"){\n    ssu.text = data;\n    speechSynthesis.speak(ssu);\n  }\n}\n\nconst doCmd = (cmd) => {\n  // console.log(\"do cmd\" + cmd[\"cmd\"]);\n  let currentTime = audioContext.currentTime;\n  switch(cmd[\"cmd\"]){\n    case \"WHITENOISE\":\n    case \"NOISE\":\n//      stop();\n      if(cmdMode.whitenoise){\n      //if(noiseGain.gain.value > 0){\n        cmdMode.whitenoise = false\n        //mode = \"none\";\n        noiseGain.gain.setTargetAtTime(0,currentTime,fadeVal.OUT + 0.01);\n        modules.textPrint(ctx, canvas, \"\");\n      } else {\n        cmdMode.whitenoise = true\n        //mode = \"whitenoise\";\n        noiseGain.gain.setTargetAtTime(gainVal.NOISE,currentTime,fadeVal.IN + 0.01);\n        modules.whitePrint(ctx, canvas);\n        modules.textPrint(ctx, canvas, \"WHITENOISE\");\n      }\n      speakVoice(\"NOISE\")\n      break;\n    case \"CLICK\":\n      click();\n      speakVoice(cmd.cmd)\n      break;\n    case \"BASS\":\n      bass();\n      //speakVoice(cmd.cmd)\n      break;\n    case \"SINEWAVE\":\n      modules.whitePrint(ctx, canvas);\n      if(cmdMode.sinewave && freqVal === cmd[\"property\"]) {\n        //mode = \"none\";\n        cmdMode.sinewave = false\n        //oscGain.gain.setTargetAtTime(0,0,fadeVal.OUT + 0.01);\n        oscGain.gain.setTargetAtTime(0,currentTime,fadeVal.OUT + 0.01);\n//        modules.textPrint(ctx, canvas, \"\");\n      } else {\n        //mode = \"sinewave\";\n        cmdMode.sinewave = true\n        chordChange = 0;\n        modules.textPrint(ctx, canvas, String(cmd[\"property\"]) + \"Hz\");\n        // console.log(t0);\n        if(freqVal != cmd.property){\n          freqVal = cmd.property\n          osc.frequency.setTargetAtTime(freqVal,currentTime,oscPortament + 0.01);\n        }\n        /*\n        if(oscPortament === 0){\n          osc.frequency.setTargetAtTime(freqVal,currentTime,0)\n          //osc.frequency.setTargetAtTime(freqVal,0,0)\n        } else {\n          osc.frequency.setTargetAtTime(freqVal,currentTime,oscPortament);\n        }*/\n        oscGain.gain.setTargetAtTime(gainVal.OSC,currentTime,fadeVal.IN + 0.01);\n        //oscGain.gain.setValueAtTime(gainVal.OSC,0);\n        //oscGain.gain.setValueAtTime(gainVal.OSC,currentTime);\n        //oscGain.gain.value = gainVal.OSC\n        //console.log(oscGain.gain.value)\n      }\n        setTimeout(()=>{\n          console.log(oscGain.gain)\n          console.log(osc.frequency)\n          console.log(freqVal)\n        },500)\n      speakVoice(String(cmd[\"property\"]) + \" Hz\")\n      break;\n    case \"SINEWAVE_UP\":\n//      osc.frequency.value = osc.frequency.value + cmd[\"property\"];\n      freqVal = osc.frequency.value + cmd[\"property\"];\n      if(oscPortament === 0){\n        osc.frequency.setTargetAtTime(freqVal,currentTime,0.01);\n      } else {\n        osc.frequency.setTargetAtTime(freqVal,currentTime,oscPortament);\n      }\n      modules.whitePrint(ctx, canvas);\n      //mode = \"sinewave\";\n      cmdMode.sinewave = true\n      chordChange = 0;\n      modules.textPrint(ctx, canvas, String(freqVal) + \"Hz\");\n      oscGain.gain.setTargetAtTime(gainVal.OSC,currentTime,fadeVal.IN + 0.01);\n      speakVoice(String(cmd.property)+ \"Hz UP\")\n      break;\n    case \"SINEWAVE_DOWN\":\n      modules.whitePrint(ctx, canvas);\n      freqVal = osc.frequency.value - cmd[\"property\"];\n      if(freqVal >= 0){\n        if(oscPortament === 0){\n          osc.frequency.setTargetAtTime(freqVal,currentTime,0.01);\n        } else {\n          osc.frequency.setTargetAtTime(freqVal,currentTime,oscPortament);\n        }\n        //mode = \"sinewave\";\n        cmdMode.sinewave = true\n        chordChange = 0;\n        modules.textPrint(ctx, canvas, String(freqVal) + \"Hz\");\n        oscGain.gain.setTargetAtTime(gainVal.OSC,currentTime,fadeVal.IN + 0.01);\n      }\n      speakVoice(String(cmd.property)+ \"Hz DOWN\")\n      break;\n    case \"PORTAMENT\":\n      modules.whitePrint(ctx, canvas);\n      modules.textPrint(ctx, canvas, \"PORTAMENT: \" + String(cmd[\"property\"]) + \"SEC\");\n      oscPortament = cmd[\"property\"];\n      break;\n    case \"FEEDBACK\":\n    case \"FEED\":\n      //if(feedbackGain.gain.value > 0) {\n      if(cmdMode.feedback) {\n        cmdMode.feedback = false\n        feedbackGain.gain.setTargetAtTime(0,currentTime,fadeVal.OUT + 0.01);\n        modules.whitePrint(ctx, canvas);\n      } else {\n        cmdMode.feedback = true\n        // console.log(\"feedback\")\n        feedbackGain.gain.setTargetAtTime(gainVal.FEEDBACK,currentTime,fadeVal.IN + 0.01);\n        modules.whitePrint(ctx, canvas);\n        modules.textPrint(ctx, canvas, \"FEEDBACK\");\n      }\n      speakVoice(cmd.cmd)\n      break;\n    case \"FILTER\":\n      let printText = filterChange();\n      modules.whitePrint(ctx, canvas);\n      modules.textPrint(ctx, canvas, \"FILTER: \" + String(printText) + \"Hz\");\n      setTimeout(() => {\n        modules.whitePrint(ctx, canvas);\n//        modules.textPrint(ctx, canvas, \"\");\n      },800);\n      break;\n    case \"GAIN\":\n      //console.log(\"TEST\");\n      modules.textPrint(ctx, canvas, cmd[\"property\"][\"target\"] + \": \" + String(cmd[\"property\"][\"val\"]));\n      gainVal[cmd[\"property\"][\"target\"].substr(0,cmd[\"property\"][\"target\"].length - 4).toUpperCase()] = Number(cmd[\"property\"][\"val\"]);\n      if(eval(cmd[\"property\"][\"target\"]) != undefined){\n        if(cmd[\"property\"][\"target\"] != \"clickGain\" && (cmd[\"property\"][\"target\"] === \"masterGain\" || eval(cmd[\"property\"][\"target\"]).gain.value > 0)){\n          eval(cmd[\"property\"][\"target\"].gain.setTargetAtTime(Number(cmd[\"property\"][\"val\"],currentTime,0.01)));\n        }\n\n        console.log(eval(cmd[\"property\"][\"target\"]).gain);\n      // } else {\n        // streamGain[cmd[\"property\"][\"target\"].substr(0,cmd[\"property\"][\"target\"].length - 4).toUpperCase] = Number(cmd[\"property\"][\"val\"]);\n      }\n      // console.log(gainVal);\n      if(cmd[\"property\"][\"target\"] === masterGain){\n        masterGain.gain.setTargetAtTime(Number(cmd[\"property\"][\"val\"]),currentTime,0.01)\n      }\n      setTimeout(()=>{\n        modules.whitePrint(ctx, canvas);\n      }, 500)\n      break;\n    case \"VOLUME\":\n      if(cmd[\"property\"] === \"UP\"){\n        modules.whitePrint(ctx, canvas);\n        if(masterGain.gain.value >= 1){\n          modules.textPrint(ctx, canvas, \"VOLUME IS FULL\");\n          setTimeout(()=>{\n            modules.whitePrint(ctx, canvas);\n          }, 500);\n        } else {\n          masterGain.gain.setTargetAtTime(masterGain.gain.value + 0.1,currentTime,0.01)\n          modules.textPrint(ctx, canvas, \"VOLUME \" + cmd[\"property\"]);\n          setTimeout(()=>{\n            modules.whitePrint(ctx, canvas);\n          }, 500);\n        }\n      } else if(cmd[\"property\"] === \"DOWN\"){\n        modules.whitePrint(ctx, canvas);\n        if(masterGain.gain.value === 0){\n          modules.textPrint(ctx, canvas, \"MUTED\");\n          setTimeout(()=>{\n            modules.whitePrint(ctx, canvas);\n          }, 500);\n        } else {\n          masterGain.gain.setTargetAtTime(masterGain.gain.value - 0.1,currentTime,0.01)\n          modules.textPrint(ctx, canvas, \"VOLUME \" + cmd[\"property\"]);\n          setTimeout(()=>{\n            modules.whitePrint(ctx, canvas);\n          }, 500);\n        }\n      } else {\n        if(isNaN(Number(cmd[\"property\"])) === false && cmd[\"property\"] != \"\"){\n          masterGain.gain.setTargetAtTime(Number(cmd[\"property\"]),currentTime,0.01)\n        }\n        modules.textPrint(ctx, canvas, \"VOLUME \" + cmd[\"property\"]);\n        setTimeout(()=>{\n          modules.whitePrint(ctx, canvas);\n        }, 500);\n      }\n      prevGain = masterGain.gain.value;\n      speakVoice(cmd.cmd + \" \" + String(cmd.property))\n      break;\n    case \"MUTE\":\n      //if(cmd[\"property\"]){\n      if(masterGain.gain.value > 0){\n        prevGain = masterGain.gain.value;\n        masterGain.gain.value.setTargetAtTime(0,currentTime,0.01)\n        modules.whitePrint(ctx, canvas);\n        modules.textPrint(ctx, canvas, \"MUTE\");\n        setTimeout(()=>{modules.whitePrint(ctx, canvas);},500);\n      } else {\n        masterGain.gain.setTargetAtTime(prevGain,currentTime,0.01)\n        modules.whitePrint(ctx, canvas);\n        modules.textPrint(ctx, canvas, \"UNMUTE\");\n        setTimeout(()=>{modules.whitePrint(ctx, canvas);},500);\n      }\n      speakVoice(cmd.cmd)\n      break;\n    case \"FADE\":\n      console.log(cmd.property.type)\n      console.log(cmd.property.status)\n      fadeVal[cmd.property.type] = Number(cmd.property.status[cmd.property.type])\n      console.log(fadeVal);\n      if(cmd.property.type === \"OUT\" && fadeVal.OUT > 0){\n        stop()\n      }\n      break;\n    case \"SWITCH ON\":\n    case \"SWITCH OFF\":\n      modules.whitePrint(ctx, canvas);\n      modules.textPrint(ctx, canvas, cmd[\"cmd\"]);\n      setTimeout(()=>{\n        modules.whitePrint(ctx, canvas);\n      }, 1500);\n      speakVoice(cmd.cmd)\n      break;\n    case \"RECORD\":\n    case \"REC\":\n      console.log(\"REC\");\n      videoStop();\n      let prevVidMode = videoMode.mode\n      videoMode.mode = \"record\";\n      modules.whitePrint(ctx, canvas);\n      modules.textPrint(ctx, canvas, \"RECORD\");\n      setTimeout(() => {\n        if(videoMode.mode === \"record\"){\n          //videoMode.mode = \"none\";\n          videoMode.mode = prevVidMode\n          modules.whitePrint(ctx, canvas);\n        }\n      }, 5000); //\n      speakVoice(cmd.cmd)\n      break;\n    case \"SHUTTER\":\n      if(cmd[\"property\"] === \"oneshot\"){\n        timelapseFlag = true;\n      } else if(cmd[\"property\"] === \"timelapse\"){\n        timeLapse();\n      } else if(cmd[\"property\"] === \"stoplapse\"){\n        stopLapse();\n      }\n      //speakVoice(cmd.cmd)\n      break;\n    case \"SECBEFORE\":\n      streamBuffer = [];\n      modules.whitePrint(ctx, canvas);\n      modules.textPrint(ctx, canvas, String(cmd[\"property\"]) + \"SEC BEFORE\");\n      videoMode.mode = \"pastBuff\";\n      if(cmd[\"rate\"] != undefined){\n        bufferRate = cmd[\"rate\"];\n      } else {\n        bufferRate = 44100;\n      }\n      setTimeout(()=>{\n        modules.whitePrint(ctx, canvas);\n        videoMode.mode = \"pastPlay\";\n      },cmd[\"property\"] * 1000);\n      speakVoice(String(cmd.property) + \"SECOND BEFORE\")\n      break;\n    case \"DRONE\":\n      if(cmd.property){\n      //if(videoMode.option != \"drone\"){\n        videoMode.option = \"drone\"\n        modules.whitePrint(ctx, canvas);\n        modules.textPrint(ctx, canvas, cmd[\"cmd\"]);\n        setTimeout(()=>{\n          modules.whitePrint(ctx, canvas);\n        },500)\n      } else {\n        videoMode.option = \"none\"\n        modules.whitePrint(ctx, canvas);\n        modules.textPrint(ctx, canvas, \"UNDRONE\");\n        setTimeout(()=>{\n          modules.whitePrint(ctx, canvas);\n        },500)\n        speakVoice(\"NOT \" + String(cmd.cmd))\n      }\n      break;\n    case \"LOOP\":\n      if(videoMode.mode === \"chat\"){\n        if(videoMode.option != \"loop\" && videoMode.option != \"drone\"){\n          videoMode.option = \"loop\"\n        } else if(videoMode.option === \"loop\"){\n          videoMode.option = \"none\"\n          console.log(chatBuffer.target)\n          console.log(playTarget)\n          //if(chatBuffer[\"target\"] === \"CHAT\"){\n          if(playTarget === \"CHAT\"){\n            socket.emit('AckFromClient', \"CHAT\");\n          } else {\n            socket.emit('wavReqFromClient', playTarget);\n          }\n        }\n      }\n      break;\n    case \"METRONOME\":\n      //console.log(cmd.property);\n      //if(cmd.type === \"param\") {\n      if(cmd.property === \"STOP\"){\n        stopRhythm();\n        speakVoice(cmd.cmd + \" STOP\")\n      } else {\n        modules.whitePrint(ctx, canvas);\n        modules.textPrint(ctx, canvas, \"BPM:\" + String(Math.floor(cmd.property.bpm * 10)/10))\n          rhythmProperty = cmd.property;\n          console.log(rhythmProperty);\n          if(cmd.trig){\n            stopRhythm();\n            setTimeout(()=>{\n              modules.whitePrint(ctx, canvas);\n              startRhythm(rhythmProperty.interval);\n            },rhythmProperty.interval)\n          }\n      //}\n      //if(cmd.trig) startRhythm();\n        speakVoice(cmd.cmd)\n      }\n      break;\n    case \"GLITCH\":\n      modules.whitePrint(ctx, canvas);\n      modules.textPrint(ctx,canvas,cmd.property);\n      setTimeout(()=>{\n        modules.whitePrint(ctx, canvas);\n      },500)\n      speakVoice(cmd.cmd)\n      break;\n    case \"BROWSER\":\n      window.open('https://instagram.com', '_blank', 'width=800,height=600');\n      speakVoice(cmd.cmd)\n    case \"PREV\":\n      pastPresent(cmd[\"property\"]);\n      break;\n    case \"STOP\":\n      stop();\n      videoStop();\n      setTimeout(()=>{\n        modules.whitePrint(ctx, canvas);\n      }, 500);\n      //speakVoice(cmd.cmd)\n      break;\n    case \"NUMBER\":\n      modules.whitePrint(ctx, canvas);\n      modules.textPrint(ctx, canvas, cmd[\"property\"]);\n      setTimeout(()=>{\n        modules.whitePrint(ctx, canvas);\n      }, 1000);\n      break;\n    case \"CTRL\":\n      console.log(cmd[\"property\"]);\n      if($('#ctrl').size()){\n        $('#ctrl').remove();\n      } else {\n        let addHTML = modules.ctrlView(cmd[\"property\"]);\n        $('#wrapper').before('<div id=\"ctrl\">' + addHTML + '</div>');\n      }\n      speakVoice(\"CONTROL\")\n      break;\n    case \"INSTRUCTION\":\n      videoStop();\n      modules.whitePrint(ctx, canvas);\n      modules.textPrint(ctx, canvas, cmd[\"property\"][\"text\"]);\n      if(client != \"inside\") alertPlay();\n      cmdMode.instruction = false\n      setTimeout(()=>{\n        modules.whitePrint(ctx, canvas);\n        cmdMode.instruction = false\n      }, cmd[\"property\"][\"duration\"]);\n      speakVoice(cmd.property.text)\n      break;\n    default:\n      console.log(cmd[\"cmd\"]);\n      for(let key in streamList){\n        if(key === cmd[\"cmd\"]){\n          // console.log(cmd[\"cmd\"]);\n          videoMode.mode = \"chat\";\n          modules.whitePrint(ctx, canvas);\n          modules.textPrint(ctx, canvas, cmd[\"cmd\"]);\n          setTimeout(()=> {\n            modules.whitePrint(ctx, canvas);\n          },800);\n        }\n      }\n      speakVoice(cmd.cmd)\n      break;\n\n  }\n  strings = \"\";\n  stringsClient = \"\";\n}\n/*\nconst munouNoUnmei = (data) =>{\n  modules.whitePrint(ctx, canvas);\n  console.log(data);\n  let speed = 0;\n  if(room = \"surface\"){\n    speed = (Math.round((data[\"speed\"] - 0.88) * 1000) / 1000);\n  } else {\n    speed = (Math.round((data[\"speed\"] - 0.75) * 1000) / 1000);\n  }\n  //data = Math.round(data * 1000) / 1000;\n  modules.textPrint(ctx, canvas, data[\"room\"] + \": \" + String(speed) + \"m/s\");\n  let freqVal = 110;\n  let cT = audioContext.currentTime;\n  if(data[\"speed\"] < 4) {\n    freqVal = 110 * Math.pow(2,data[\"speed\"] * 2 / 12);  //1m/s^21\n  } else if(data < 8) {\n    freqVal = 110 * Math.pow(2,(data[\"speed\"]-1) * 2 /12 + 1 / 12);  //1m/s^21\n  } else {\n    freqVal = 110 * Math.pow(2,(data[\"speed\"] - 2) * 2 /12 + 2 / 12);  //1m/s^21\n  }\n  if(munouGain.gain.value === 0) munouGain.gain.value = 0.7;\n  munouOsc.frequency.setTargetAtTime(freqVal,cT,0.3);\n}\n*/\n\nconst stop = () => {\n  let currentTime = audioContext.currentTime\n  oscGain.gain.setTargetAtTime(0,currentTime,fadeVal.OUT + 0.01);\n  feedbackGain.gain.setTargetAtTime(0,currentTime,fadeVal.OUT + 0.01)\n  noiseGain.gain.setTargetAtTime(0,currentTime,fadeVal.OUT + 0.01)\n  bassGain.gain.setTargetAtTime(0,currentTime,fadeVal.OUT + 0.01)\n  //munouGain.gain.value = 0;\n  bassFlag = false;\n  modules.whitePrint(ctx, canvas);\n//  modules.textPrint(ctx, canvas, \"\");\n  cmdMode = {\n    \"sinewave\": false,\n    \"whitenoise\": false,\n    \"feedback\": false,\n    \"instruction\": false\n  }\n  modules.textPrint(ctx, canvas, \"STOP\");\n  stopRhythm();\n}\n\nconst videoStop = () => {\n  switch (videoMode.mode) {\n    case \"chunkEmit\":\n      break;\n    case \"beforePlay\":\n    case \"beforeBuff\":\n    default:\n      videoMode.mode = \"none\";\n      break;\n  }\n}\n\n\nconst pastPresent = (status) =>{\n  // console.log(status);\n  for(let key in status){\n    if(key === \"SINEWAVE\" && status[key]){\n      doCmd({\"cmd\":key, \"property\": Number(status[key])});\n    } else if(key === \"SECBEFORE\" && status[key]){\n      videoMode.mode = \"pastPlay\";\n    } else if(status[key]){\n      doCmd({\"cmd\":key});\n    }\n  }\n}\n\nconst playVideo = (video) => {\n//  whitePrint();\n  image = new Image();\n  image.src = video;\n  var wdth;\n  var hght;\n  wdth = $(window).width();\n  hght = (wdth * 3) / 4;\n\n  image.onload = function(){\n    receive_ctx.drawImage(image, 0, 0, wdth, hght);\n  }\n}\n\nconst lapseInterval = 120000;\nlet setLapse;\n\nconst timeLapse = ()=>{\n  setLapse = setInterval(() => {\n      timelapseFlag = true;\n  }, lapseInterval);\n}\n\nconst stopLapse = ()=>{\n  clearInterval(setLapse);\n}\n\n/*\nconst emitInterval = 120000;\nsetInterval(() => {\n  // if(videoMode.mode === \"none\"){\n    // console.log(\"\");\n    timelapseFlag = true;\n  // }\n}, emitInterval);\n*/\n\n//ctrlView ctrl\n\n$(function() {\n  $(document).on('change', '.range', function(){\n    console.log(\"range change\");\n    let ctrlCmd;\n    let ctrlProperty;\n    if($(this).attr('id') === \"CHATRATE\"){\n      ctrlCmd = \"CHATRATE\"\n      ctrlProperty ={\n        \"target\": $(this).attr('name'),\n        \"val\" : $(this).val()\n      };\n      let test ='label[name=\"' + ctrlProperty[\"target\"] + '\"]#CHATRATELabel';\n      console.log(test);\n      $('label[name=\"' + ctrlProperty[\"target\"] + '\"]#CHATRATELabel').text(String(ctrlProperty[\"val\"]));\n    } else if($(this).attr('id').match(/^LATENCY/) || $(this).attr('id').match(/^RATE/) ) {\n      let val = $(this).val();\n      let targetArr = $(this).attr('id').split(\"_\");\n      if(targetArr[0] === \"LATENCY\") val = val * 1000;\n      ctrlCmd = targetArr[0];\n      ctrlProperty = {\n        \"target\": $(this).attr('name'),\n        \"streamType\": targetArr[1],\n        \"val\": val\n      }\n      $('#' + targetArr[0] + 'Label').text(val);\n      setTimeout(()=>{\n        $('#' + targetArr[0] + 'Label').text(targetArr[0]);\n      },2000);\n    } else {\n      ctrlCmd = $(this).attr('name');\n      ctrlProperty = {\n        \"target\" : $(this).attr('id'),\n        \"val\" : $(this).val()\n      };\n      $('#' + ctrlCmd + ctrlProperty[\"target\"] + 'Label').text(String(ctrlProperty[\"val\"]));\n    }\n    console.log(ctrlCmd);\n    console.log(ctrlProperty);\n    socket.emit('cmdFromCtrl',{\n      \"cmd\": ctrlCmd,\n      \"property\": ctrlProperty\n    });\n  });\n});\n\n$(function() {\n  $(document).on('change', '.route', function(){\n    let property = {\n      \"target\" : $(this).attr('name'),\n      \"stream\" : $(this).attr('id').split(\"_\")[0],\n      \"val\" : $(this).prop('checked')\n    };\n    console.log(property);\n    socket.emit('cmdFromCtrl',{\n      \"cmd\": $(this).attr('id').split(\"_\")[1],\n      \"property\": property\n    });\n  });\n});\n$(function() {\n  $(document).on('change', '.glitch', function(){\n    let property = {\n      \"stream\" : $(this).attr('id'),\n      \"val\" : $(this).prop('checked')\n    };\n    console.log(property);\n    socket.emit('cmdFromCtrl',{\n      \"cmd\": \"GLITCH\",\n      \"property\": property\n    });\n  });\n});\n\nconst funcToBase64 = () =>{\n  //console.log(buffer);\n  let bufferContext = buffer.getContext('2d');\n  buffer.width = video.videoWidth;\n  buffer.height = video.videoHeight;\n  bufferContext.drawImage(video, 0, 0);\n  //return buffer.toDataURL(\"image/webp\");\n  return buffer.toDataURL(\"image/jpeg\");\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client.js"],"sourceRoot":""}